<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/src/App.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/App.tsx" />
              <option name="originalContent" value="/**&#10; * Copyright 2024 Google LLC&#10; *&#10; * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);&#10; * you may not use this file except in compliance with the License.&#10; * You may obtain a copy of the License at&#10; *&#10; *     http://www.apache.org/licenses/LICENSE-2.0&#10; *&#10; * Unless required by applicable law or agreed to in writing, software&#10; * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&#10; * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&#10; * See the License for the specific language governing permissions and&#10; * limitations under the License.&#10; */&#10;&#10;import &quot;./App.scss&quot;;&#10;import { LiveAPIProvider } from &quot;./contexts/LiveAPIContext&quot;;&#10;import { Altair } from &quot;./components/altair/Altair&quot;;&#10;import AudioControlTray from &quot;./components/audio-control-tray/AudioControlTray&quot;;&#10;import ChatInput from &quot;./components/chat-input/ChatInput&quot;;&#10;import { LiveClientOptions } from &quot;./types&quot;;&#10;&#10;const API_KEY = process.env.REACT_APP_GEMINI_API_KEY as string;&#10;if (typeof API_KEY !== &quot;string&quot;) {&#10;  throw new Error(&quot;set REACT_APP_GEMINI_API_KEY in .env&quot;);&#10;}&#10;&#10;const apiOptions: LiveClientOptions = {&#10;  apiKey: API_KEY,&#10;};&#10;&#10;function App() {&#10;  return (&#10;    &lt;div className=&quot;min-h-screen bg-background&quot;&gt;&#10;      &lt;LiveAPIProvider options={apiOptions}&gt;&#10;        &lt;div className=&quot;container mx-auto py-8 px-4&quot;&gt;&#10;          &lt;div className=&quot;max-w-4xl mx-auto space-y-6&quot;&gt;&#10;            &lt;div className=&quot;text-center mb-8&quot;&gt;&#10;              &lt;h1 className=&quot;text-4xl font-bold tracking-tight&quot;&gt;&#10;                IELTS Speaking Test&#10;              &lt;/h1&gt;&#10;              &lt;p className=&quot;text-muted-foreground mt-2&quot;&gt;&#10;                AI-powered speaking practice with real-time feedback&#10;              &lt;/p&gt;&#10;            &lt;/div&gt;&#10;&#10;            {/* Altair Chart/Graph Component */}&#10;            &lt;Altair /&gt;&#10;&#10;            {/* Audio Controls */}&#10;            &lt;AudioControlTray /&gt;&#10;&#10;            {/* Chat Input */}&#10;            &lt;ChatInput /&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;      &lt;/LiveAPIProvider&gt;&#10;    &lt;/div&gt;&#10;  );&#10;}&#10;&#10;export default App;&#10;" />
              <option name="updatedContent" value="/**&#10; * Copyright 2024 Google LLC&#10; *&#10; * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);&#10; * you may not use this file except in compliance with the License.&#10; * You may obtain a copy of the License at&#10; *&#10; *     http://www.apache.org/licenses/LICENSE-2.0&#10; *&#10; * Unless required by applicable law or agreed to in writing, software&#10; * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&#10; * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&#10; * See the License for the specific language governing permissions and&#10; * limitations under the License.&#10; */&#10;&#10;import &quot;./App.scss&quot;;&#10;import { LiveAPIProvider } from &quot;./contexts/LiveAPIContext&quot;;&#10;import { ChatLayout } from &quot;./components/chat-layout/ChatLayout&quot;;&#10;import { LiveClientOptions } from &quot;./types&quot;;&#10;&#10;const API_KEY = process.env.REACT_APP_GEMINI_API_KEY as string;&#10;if (!API_KEY) {&#10;  throw new Error(&quot;set REACT_APP_GEMINI_API_KEY in .env&quot;);&#10;}&#10;&#10;const apiOptions: LiveClientOptions = {&#10;  apiKey: API_KEY,&#10;};&#10;&#10;function App() {&#10;  return (&#10;    &lt;LiveAPIProvider options={apiOptions}&gt;&#10;      &lt;ChatLayout /&gt;&#10;    &lt;/LiveAPIProvider&gt;&#10;  );&#10;}&#10;&#10;export default App;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/components/chat-layout/ChatLayout.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/components/chat-layout/ChatLayout.tsx" />
              <option name="updatedContent" value="import { useState, useEffect } from &quot;react&quot;;&#10;import { useLiveAPIContext } from &quot;../../contexts/LiveAPIContext&quot;;&#10;import { useLoggerStore } from &quot;../../lib/store-logger&quot;;&#10;import { Sidebar, SidebarContent, SidebarItem } from &quot;../ui/sidebar&quot;;&#10;import { Button } from &quot;../ui/button&quot;;&#10;import { Textarea } from &quot;../ui/textarea&quot;;&#10;import { LogsViewer } from &quot;../logs-viewer/LogsViewer&quot;;&#10;import { Plus, Settings, LogOut, Menu, X, Mic, MicOff, Send } from &quot;lucide-react&quot;;&#10;import { cn } from &quot;../../lib/utils-cn&quot;;&#10;&#10;interface Message {&#10;  id: string;&#10;  role: &quot;user&quot; | &quot;assistant&quot;;&#10;  content: string;&#10;  timestamp: Date;&#10;}&#10;&#10;export function ChatLayout() {&#10;  const { client, connected, connect, disconnect, volume } =&#10;    useLiveAPIContext();&#10;  const { log } = useLoggerStore();&#10;&#10;  const [messages, setMessages] = useState&lt;Message[]&gt;([]);&#10;  const [textInput, setTextInput] = useState(&quot;&quot;);&#10;  const [muted, setMuted] = useState(false);&#10;  const [showLogs, setShowLogs] = useState(true);&#10;  const [showSidebar, setShowSidebar] = useState(true);&#10;&#10;  // Listen to logs for conversation logging&#10;  useEffect(() =&gt; {&#10;    client.on(&quot;log&quot;, log);&#10;    return () =&gt; {&#10;      client.off(&quot;log&quot;, log);&#10;    };&#10;  }, [client, log]);&#10;&#10;  const handleSendMessage = () =&gt; {&#10;    if (!textInput.trim()) return;&#10;&#10;    const userMessage: Message = {&#10;      id: Math.random().toString(),&#10;      role: &quot;user&quot;,&#10;      content: textInput,&#10;      timestamp: new Date(),&#10;    };&#10;&#10;    setMessages((prev) =&gt; [...prev, userMessage]);&#10;    console.log(&quot; USER TEXT:&quot;, textInput);&#10;    client.send([{ text: textInput }]);&#10;    setTextInput(&quot;&quot;);&#10;  };&#10;&#10;  const handleKeyDown = (e: React.KeyboardEvent&lt;HTMLTextAreaElement&gt;) =&gt; {&#10;    if (e.key === &quot;Enter&quot; &amp;&amp; !e.shiftKey) {&#10;      e.preventDefault();&#10;      handleSendMessage();&#10;    }&#10;  };&#10;&#10;  return (&#10;    &lt;div className=&quot;flex h-screen bg-white overflow-hidden&quot;&gt;&#10;      {/* Sidebar */}&#10;      {showSidebar &amp;&amp; (&#10;        &lt;Sidebar&gt;&#10;          &lt;div className=&quot;p-4 border-b border-slate-700&quot;&gt;&#10;            &lt;Button&#10;              onClick={() =&gt; setMessages([])}&#10;              className=&quot;w-full flex items-center justify-center gap-2 bg-slate-800 hover:bg-slate-700&quot;&#10;            &gt;&#10;              &lt;Plus className=&quot;h-4 w-4&quot; /&gt;&#10;              New Chat&#10;            &lt;/Button&gt;&#10;          &lt;/div&gt;&#10;&#10;          &lt;SidebarContent&gt;&#10;            {messages.length &gt; 0 &amp;&amp; (&#10;              &lt;SidebarItem&gt;&#10;                {messages[0].content.substring(0, 30)}...&#10;              &lt;/SidebarItem&gt;&#10;            )}&#10;          &lt;/SidebarContent&gt;&#10;&#10;          &lt;div className=&quot;border-t border-slate-700 p-4 space-y-2&quot;&gt;&#10;            &lt;Button&#10;              variant=&quot;ghost&quot;&#10;              className=&quot;w-full justify-start text-slate-300 hover:text-white hover:bg-slate-800&quot;&#10;            &gt;&#10;              &lt;Settings className=&quot;h-4 w-4 mr-2&quot; /&gt;&#10;              Settings&#10;            &lt;/Button&gt;&#10;            &lt;Button&#10;              variant=&quot;ghost&quot;&#10;              onClick={disconnect}&#10;              className=&quot;w-full justify-start text-slate-300 hover:text-white hover:bg-slate-800&quot;&#10;            &gt;&#10;              &lt;LogOut className=&quot;h-4 w-4 mr-2&quot; /&gt;&#10;              Logout&#10;            &lt;/Button&gt;&#10;          &lt;/div&gt;&#10;        &lt;/Sidebar&gt;&#10;      )}&#10;&#10;      {/* Main Content */}&#10;      &lt;div className=&quot;flex-1 flex flex-col&quot;&gt;&#10;        {/* Header */}&#10;        &lt;div className=&quot;border-b border-slate-200 px-6 py-4 flex items-center justify-between&quot;&gt;&#10;          &lt;div className=&quot;flex items-center gap-4&quot;&gt;&#10;            &lt;button&#10;              onClick={() =&gt; setShowSidebar(!showSidebar)}&#10;              className=&quot;p-2 hover:bg-slate-100 rounded-lg transition-colors&quot;&#10;            &gt;&#10;              {showSidebar ? (&#10;                &lt;X className=&quot;h-5 w-5&quot; /&gt;&#10;              ) : (&#10;                &lt;Menu className=&quot;h-5 w-5&quot; /&gt;&#10;              )}&#10;            &lt;/button&gt;&#10;            &lt;h1 className=&quot;text-xl font-semibold&quot;&gt;IELTS Speaking Practice&lt;/h1&gt;&#10;          &lt;/div&gt;&#10;&#10;          &lt;div className=&quot;flex items-center gap-2&quot;&gt;&#10;            &lt;div&#10;              className={cn(&#10;                &quot;h-3 w-3 rounded-full&quot;,&#10;                connected ? &quot;bg-green-500&quot; : &quot;bg-slate-300&quot;&#10;              )}&#10;            /&gt;&#10;            &lt;span className=&quot;text-sm text-slate-600&quot;&gt;&#10;              {connected ? &quot;Connected&quot; : &quot;Disconnected&quot;}&#10;            &lt;/span&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;&#10;        {/* Messages Area */}&#10;        &lt;div className=&quot;flex-1 overflow-y-auto px-6 py-6 space-y-4&quot;&gt;&#10;          {messages.length === 0 ? (&#10;            &lt;div className=&quot;flex flex-col items-center justify-center h-full text-center&quot;&gt;&#10;              &lt;div className=&quot;max-w-md&quot;&gt;&#10;                &lt;h2 className=&quot;text-3xl font-bold text-slate-900 mb-2&quot;&gt;&#10;                  IELTS Speaking Test&#10;                &lt;/h2&gt;&#10;                &lt;p className=&quot;text-slate-600 mb-6&quot;&gt;&#10;                  AI-powered speaking practice with real-time feedback&#10;                &lt;/p&gt;&#10;                &lt;Button&#10;                  onClick={connected ? disconnect : connect}&#10;                  className={cn(&#10;                    &quot;w-full&quot;,&#10;                    connected&#10;                      ? &quot;bg-red-500 hover:bg-red-600&quot;&#10;                      : &quot;bg-green-500 hover:bg-green-600&quot;&#10;                  )}&#10;                &gt;&#10;                  {connected ? &quot;Stop&quot; : &quot;Start&quot;} Conversation&#10;                &lt;/Button&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;          ) : (&#10;            messages.map((message) =&gt; (&#10;              &lt;div&#10;                key={message.id}&#10;                className={cn(&#10;                  &quot;flex gap-4&quot;,&#10;                  message.role === &quot;user&quot; ? &quot;justify-end&quot; : &quot;justify-start&quot;&#10;                )}&#10;              &gt;&#10;                &lt;div&#10;                  className={cn(&#10;                    &quot;max-w-md px-4 py-3 rounded-lg&quot;,&#10;                    message.role === &quot;user&quot;&#10;                      ? &quot;bg-blue-500 text-white rounded-br-none&quot;&#10;                      : &quot;bg-slate-100 text-slate-900 rounded-bl-none&quot;&#10;                  )}&#10;                &gt;&#10;                  &lt;p className=&quot;text-sm&quot;&gt;{message.content}&lt;/p&gt;&#10;                  &lt;p&#10;                    className={cn(&#10;                      &quot;text-xs mt-1&quot;,&#10;                      message.role === &quot;user&quot;&#10;                        ? &quot;text-blue-100&quot;&#10;                        : &quot;text-slate-500&quot;&#10;                    )}&#10;                  &gt;&#10;                    {message.timestamp.toLocaleTimeString()}&#10;                  &lt;/p&gt;&#10;                &lt;/div&gt;&#10;              &lt;/div&gt;&#10;            ))&#10;          )}&#10;        &lt;/div&gt;&#10;&#10;        {/* Input Area */}&#10;        &lt;div className=&quot;border-t border-slate-200 px-6 py-4 bg-white&quot;&gt;&#10;          &lt;div className=&quot;flex gap-3&quot;&gt;&#10;            &lt;Button&#10;              variant={muted ? &quot;destructive&quot; : &quot;secondary&quot;}&#10;              size=&quot;icon&quot;&#10;              onClick={() =&gt; setMuted(!muted)}&#10;              disabled={!connected}&#10;              className=&quot;flex-shrink-0&quot;&#10;            &gt;&#10;              {muted ? (&#10;                &lt;MicOff className=&quot;h-5 w-5&quot; /&gt;&#10;              ) : (&#10;                &lt;Mic className=&quot;h-5 w-5&quot; /&gt;&#10;              )}&#10;            &lt;/Button&gt;&#10;&#10;            &lt;div className=&quot;flex-1 flex gap-2&quot;&gt;&#10;              &lt;Textarea&#10;                value={textInput}&#10;                onChange={(e) =&gt; setTextInput(e.target.value)}&#10;                onKeyDown={handleKeyDown}&#10;                placeholder=&quot;Type a message... (Shift+Enter for new line)&quot;&#10;                disabled={!connected}&#10;                className=&quot;min-h-12 resize-none&quot;&#10;              /&gt;&#10;              &lt;Button&#10;                onClick={handleSendMessage}&#10;                disabled={!connected || !textInput.trim()}&#10;                size=&quot;icon&quot;&#10;                className=&quot;flex-shrink-0&quot;&#10;              &gt;&#10;                &lt;Send className=&quot;h-5 w-5&quot; /&gt;&#10;              &lt;/Button&gt;&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;&#10;          {/* Volume Indicator */}&#10;          {connected &amp;&amp; (&#10;            &lt;div className=&quot;mt-3 flex items-center gap-2&quot;&gt;&#10;              &lt;div className=&quot;h-6 w-32 bg-slate-200 rounded-full flex items-center px-2&quot;&gt;&#10;                &lt;div&#10;                  className=&quot;h-2 bg-blue-500 rounded-full transition-all duration-100&quot;&#10;                  style={{&#10;                    width: `${Math.min(Math.max(volume * 100, 5), 100)}%`,&#10;                  }}&#10;                /&gt;&#10;              &lt;/div&gt;&#10;              &lt;span className=&quot;text-xs text-slate-500&quot;&gt;Volume&lt;/span&gt;&#10;            &lt;/div&gt;&#10;          )}&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;&#10;      {/* Logs Sidebar */}&#10;      {showLogs &amp;&amp; (&#10;        &lt;div className=&quot;w-96 border-l border-slate-200&quot;&gt;&#10;          &lt;LogsViewer onClose={() =&gt; setShowLogs(false)} /&gt;&#10;        &lt;/div&gt;&#10;      )}&#10;&#10;      {/* Toggle Logs Button */}&#10;      {!showLogs &amp;&amp; (&#10;        &lt;button&#10;          onClick={() =&gt; setShowLogs(true)}&#10;          className=&quot;fixed bottom-4 right-4 bg-slate-900 text-white p-3 rounded-full shadow-lg hover:bg-slate-800 transition-colors&quot;&#10;          title=&quot;Show Logs&quot;&#10;        &gt;&#10;          &#10;        &lt;/button&gt;&#10;      )}&#10;    &lt;/div&gt;&#10;  );&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/components/logs-viewer/LogsViewer.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/components/logs-viewer/LogsViewer.tsx" />
              <option name="updatedContent" value="import { useEffect, useRef } from &quot;react&quot;;&#10;import { useLoggerStore } from &quot;../../lib/store-logger&quot;;&#10;import { Card } from &quot;../ui/card&quot;;&#10;import { ScrollArea } from &quot;../ui/scroll-area&quot;;&#10;import { cn } from &quot;../../lib/utils-cn&quot;;&#10;import { X } from &quot;lucide-react&quot;;&#10;&#10;interface LogsViewerProps {&#10;  onClose?: () =&gt; void;&#10;}&#10;&#10;export function LogsViewer({ onClose }: LogsViewerProps) {&#10;  const { logs } = useLoggerStore();&#10;  const scrollRef = useRef&lt;HTMLDivElement&gt;(null);&#10;&#10;  useEffect(() =&gt; {&#10;    if (scrollRef.current) {&#10;      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;&#10;    }&#10;  }, [logs]);&#10;&#10;  const getLevelColor = (type: string) =&gt; {&#10;    if (type.includes(&quot;error&quot;)) return &quot;text-red-500&quot;;&#10;    if (type.includes(&quot;audio&quot;)) return &quot;text-blue-500&quot;;&#10;    if (type.includes(&quot;send&quot;)) return &quot;text-green-500&quot;;&#10;    if (type.includes(&quot;receive&quot;)) return &quot;text-orange-500&quot;;&#10;    return &quot;text-slate-400&quot;;&#10;  };&#10;&#10;  const getEmoji = (type: string) =&gt; {&#10;    if (type.includes(&quot;error&quot;)) return &quot;❌&quot;;&#10;    if (type.includes(&quot;audio&quot;)) return &quot;&quot;;&#10;    if (type.includes(&quot;question&quot;)) return &quot;❓&quot;;&#10;    if (type.includes(&quot;send&quot;)) return &quot;&quot;;&#10;    if (type.includes(&quot;receive&quot;)) return &quot;&quot;;&#10;    return &quot;&quot;;&#10;  };&#10;&#10;  return (&#10;    &lt;Card className=&quot;h-full bg-slate-50 border-l border-slate-200 rounded-none flex flex-col&quot;&gt;&#10;      &lt;div className=&quot;flex items-center justify-between p-4 border-b border-slate-200&quot;&gt;&#10;        &lt;h2 className=&quot;text-lg font-semibold text-slate-900&quot;&gt;Logs&lt;/h2&gt;&#10;        {onClose &amp;&amp; (&#10;          &lt;button&#10;            onClick={onClose}&#10;            className=&quot;text-slate-500 hover:text-slate-700&quot;&#10;          &gt;&#10;            &lt;X className=&quot;h-5 w-5&quot; /&gt;&#10;          &lt;/button&gt;&#10;        )}&#10;      &lt;/div&gt;&#10;&#10;      &lt;ScrollArea ref={scrollRef} className=&quot;flex-1&quot;&gt;&#10;        &lt;div className=&quot;p-4 space-y-2&quot;&gt;&#10;          {logs.length === 0 ? (&#10;            &lt;p className=&quot;text-sm text-slate-500 italic&quot;&gt;No logs yet...&lt;/p&gt;&#10;          ) : (&#10;            logs.map((log, idx) =&gt; (&#10;              &lt;div&#10;                key={idx}&#10;                className=&quot;text-xs font-mono bg-white p-2 rounded border border-slate-200 hover:border-slate-300 transition-colors&quot;&#10;              &gt;&#10;                &lt;div className=&quot;flex gap-2&quot;&gt;&#10;                  &lt;span className=&quot;text-lg&quot;&gt;{getEmoji(log.type)}&lt;/span&gt;&#10;                  &lt;div className=&quot;flex-1 min-w-0&quot;&gt;&#10;                    &lt;div className={cn(&quot;font-semibold&quot;, getLevelColor(log.type))}&gt;&#10;                      {log.type}&#10;                    &lt;/div&gt;&#10;                    &lt;div className=&quot;text-slate-600 whitespace-pre-wrap break-words&quot;&gt;&#10;                      {typeof log.message === &quot;string&quot;&#10;                        ? log.message&#10;                        : JSON.stringify(log.message, null, 2)}&#10;                    &lt;/div&gt;&#10;                    &lt;div className=&quot;text-slate-400 mt-1&quot;&gt;&#10;                      {log.date.toLocaleTimeString()}&#10;                    &lt;/div&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;              &lt;/div&gt;&#10;            ))&#10;          )}&#10;        &lt;/div&gt;&#10;      &lt;/ScrollArea&gt;&#10;    &lt;/Card&gt;&#10;  );&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/components/ui/scroll-area.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/components/ui/scroll-area.tsx" />
              <option name="updatedContent" value="import * as React from &quot;react&quot;;&#10;import { cn } from &quot;../../lib/utils-cn&quot;;&#10;&#10;export interface ScrollAreaProps&#10;  extends React.HTMLAttributes&lt;HTMLDivElement&gt; {&#10;  children: React.ReactNode;&#10;}&#10;&#10;const ScrollArea = React.forwardRef&lt;HTMLDivElement, ScrollAreaProps&gt;(&#10;  ({ className, children, ...props }, ref) =&gt; (&#10;    &lt;div&#10;      ref={ref}&#10;      className={cn(&quot;overflow-y-auto&quot;, className)}&#10;      {...props}&#10;    &gt;&#10;      {children}&#10;    &lt;/div&gt;&#10;  )&#10;);&#10;ScrollArea.displayName = &quot;ScrollArea&quot;;&#10;&#10;export { ScrollArea };&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>